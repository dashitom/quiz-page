<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>脳年齢表示</title>
<style>
body {
  margin: 0;
  height: 100vh;
  font-family: 'Arial', sans-serif;
  color: #000;
  position: relative;
  overflow: hidden;
  background-color: #fff;
}

/* 背景格子 */
body::before {
  content: "";
  position: absolute;
  top:0; left:0;
  width:100%; height:100%;
  background-image: linear-gradient(to right, rgba(0,0,0,0.05) 1px, transparent 1px),
                    linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px);
  background-size: 30px 30px;
  pointer-events: none;
}

.container {
  position: relative;
  width: 80%;
  margin: 5vh auto;
  z-index: 1;
}

.line1 {
  font-size: 2em;
  font-weight: bold;
  text-align: left;
  opacity: 0;
  animation: showLine 0.01s forwards 1s;
}
.line2 {
  font-size: 6em;
  font-weight: bold;
  text-align: left;
  margin-top:-3vh;
  opacity: 0;
}
.line3 {
  font-size: 2em;
  font-weight: bold;
  text-align: left;
  color: #c00;
  opacity: 0;
}
.line4 {
  font-size: 1em;
  font-weight: bold;
  text-align: left;
  margin-top: 5vh;
  opacity: 0;
}

/* 画像ボックス */
.face-container {
  width: 150px;
  height: 150px;
  position: absolute;
  top: 10vh;
  right: -5vw;
  perspective: 800px;
}
.float-wrap {
  animation: float 2s ease-in-out infinite;
}
.face {
  width: 30vw;
  height: 30vw;
  object-fit: contain;
  opacity: 1;
  display:block;
  margin:0 auto;
  transition: transform 0.5s ease, opacity 0.5s ease;
}

/* アニメーション */
@keyframes float {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-20px); }
}
@keyframes showLine {
  to { opacity: 1; }
}
</style>
</head>
<body>
<div class="container">
  <div class="line1">あなたの脳年齢は</div>
  <div class="line2">60才</div>
  <div class="line3">還暦おめでとう！</div>
  <div class="face-container">
    <div class="float-wrap">
      <img src="kawashima.png" class="face" id="face" style="display:none;">
    </div>
  </div>
  <div class="line4">
    SCORE:XXXX<br><br>
    <<演出含めてまだまだ要検討！>><br><br>
    ゲームディレクター：TATSUHIKO<br>
    Webデザイン・開発：TOMOHIRO<br>
  </div>
</div>

<script>

// 画像プリロード
window.addEventListener("load", () => {
  const imageUrls = ["kawashima2.png", "pico.png"]

  imageUrls.forEach(src => {
    const img = new Image();
    img.src = src;
  });
});

const face = document.getElementById('face');
const line2 = document.querySelector('.line2');
const line3 = document.querySelector('.line3');
const line4 = document.querySelector('.line4');

// ふわふわ停止
function stopFloat() {
  face.style.animationPlayState = "paused";
}

// ふわふわ再開
function startFloat() {
  face.style.animation = "float 2s ease-in-out infinite";
}

setTimeout(() => {
  face.style.display = '';
}, 1000);

// ① 3秒後：上昇開始
setTimeout(() => {
  stopFloat();
  face.src = "kawashima2.png";
  face.style.transition = "transform 1s ease-in";
  face.style.opacity = "1";
  face.style.transform = "translateY(-40vh)";
}, 4000);

// ② 画像差し替え → 下に落ちる
setTimeout(() => {
  face.src = "pico.png"; // 2枚目
  face.style.transition = "transform 0.3s ease-out";
  face.style.transform = "translateY(0)";
}, 5000);

// ③ 落下直後、60才を表示
setTimeout(() => {
  line2.style.animation = "showLine 0.01s forwards";
}, 5300);

// ④ 1秒後「還暦おめでとう！」表示
setTimeout(() => {
  line3.style.animation = "showLine 0.5s forwards";
}, 6500);

// ⑤ 直後に画像差替＋ふわふわ速度アップ
setTimeout(() => {
  //face.src = "pico.png"; // 3枚目
  startFloat();
  face.style.animation = "showLine 0s forwards, float 0.5s ease-in-out infinite";
}, 6500);

setTimeout(() => {
  line4.style.animation = "showLine 0.5s forwards";
}, 8500);


//紙吹雪
function createConfettiPiece() {
  const confetti = document.createElement('div');
  const size = Math.random() * 8 + 4; // 大きさ4〜12px
  confetti.style.position = 'fixed';
  confetti.style.top = '-10px';
  confetti.style.left = Math.random() * 100 + 'vw';
  confetti.style.width = size + 'px';
  confetti.style.height = size * 0.4 + 'px';
  confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 80%, 60%)`;
  confetti.style.opacity = Math.random() * 0.8 + 0.2;
  confetti.style.borderRadius = '2px';
  confetti.style.zIndex = 9999;
  confetti.style.pointerEvents = 'none';

  // 初期回転
  const rotation = Math.random() * 360;
  confetti.style.transform = `rotate(${rotation}deg)`;
  document.body.appendChild(confetti);

  // 落下アニメーション
  const fallDuration = Math.random() * 3 + 4; // 4〜7秒で落下
  const horizontalShift = Math.random() * 40 - 20; // 左右の揺れ

  confetti.animate([
    { transform: `translate(0, 0) rotate(${rotation}deg)` },
    { transform: `translate(${horizontalShift}vw, 100vh) rotate(${rotation + 360}deg)` }
  ], {
    duration: fallDuration * 1000,
    easing: 'linear',
    fill: 'forwards'
  });

  // 終了後に削除
  setTimeout(() => confetti.remove(), fallDuration * 1000);
}

function startConfetti() {
  setInterval(() => {
    for (let i = 0; i < 5; i++) createConfettiPiece();
  }, 200); // 常時発生（0.2秒ごと）
}

// 「還暦おめでとう！」表示のタイミングで開始
setTimeout(() => {
  startConfetti();
}, 6500);
</script>
</body>
</html>
